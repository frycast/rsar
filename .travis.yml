# R for travis: see documentation at https://docs.travis-ci.com/user/languages/r
# and this guide: https://towardsdatascience.com/travis-ci-for-r-advanced-guide-719cb2d9e0e5

language: R
sudo: false
cache: packages
latex: false
fortran: false

matrix:
  include:
    - r: oldrel
      os: linux
      dist: trusty
    - r: release
      os: linux
      dist: trusty
      r_packages:
      - covr
      - rgdal
      after_success:
      - tar -C .. -xf $PKG_TARBALL
      - Rscript -e 'covr::codecov()'
    - r: devel
      os: linux
      dist: trusty
#    - r: release
#      os: osx
#      before_install:
#      - brew update

r_github_packages:
      - rstudio/reticulate

before_script:
  - sudo apt-get update
  - sudo apt install libgdal-dev
  - sudo apt install libproj-dev
  - sudo apt-get install python3
  - pip install --upgrade --ignore-installed --user travis virtualenv
  - R CMD INSTALL .

env:
  - _R_CHECK_FORCE_SUGGESTS_=false
